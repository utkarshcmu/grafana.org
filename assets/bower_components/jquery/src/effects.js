define(["./core","./var/pnum","./css/var/cssExpand","./css/var/isHidden","./css/defaultDisplay","./data/var/data_priv","./core/init","./effects/Tween","./queue","./css","./deferred","./traversing"],function(t,e,n,r,i,o){function a(){return setTimeout(function(){d=void 0}),d=t.now()}function s(t,e){var r,i=0,o={height:t};for(e=e?1:0;4>i;i+=2-e)r=n[i],o["margin"+r]=o["padding"+r]=t;return e&&(o.opacity=o.width=t),o}function u(t,e,n){for(var r,i=(y[e]||[]).concat(y["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,e,t))return r}function c(e,n,a){var s,c,l,f,d,p,m,g,v=this,y={},b=e.style,_=e.nodeType&&r(e),w=o.get(e,"fxshow");a.queue||(d=t._queueHooks(e,"fx"),null==d.unqueued&&(d.unqueued=0,p=d.empty.fire,d.empty.fire=function(){d.unqueued||p()}),d.unqueued++,v.always(function(){v.always(function(){d.unqueued--,t.queue(e,"fx").length||d.empty.fire()})})),1===e.nodeType&&("height"in n||"width"in n)&&(a.overflow=[b.overflow,b.overflowX,b.overflowY],m=t.css(e,"display"),g="none"===m?o.get(e,"olddisplay")||i(e.nodeName):m,"inline"===g&&"none"===t.css(e,"float")&&(b.display="inline-block")),a.overflow&&(b.overflow="hidden",v.always(function(){b.overflow=a.overflow[0],b.overflowX=a.overflow[1],b.overflowY=a.overflow[2]}));for(s in n)if(c=n[s],h.exec(c)){if(delete n[s],l=l||"toggle"===c,c===(_?"hide":"show")){if("show"!==c||!w||void 0===w[s])continue;_=!0}y[s]=w&&w[s]||t.style(e,s)}else m=void 0;if(t.isEmptyObject(y))"inline"===("none"===m?i(e.nodeName):m)&&(b.display=m);else{w?"hidden"in w&&(_=w.hidden):w=o.access(e,"fxshow",{}),l&&(w.hidden=!_),_?t(e).show():v.done(function(){t(e).hide()}),v.done(function(){var n;o.remove(e,"fxshow");for(n in y)t.style(e,n,y[n])});for(s in y)f=u(_?w[s]:0,s,v),s in w||(w[s]=f.start,_&&(f.end=f.start,f.start="width"===s||"height"===s?1:0))}}function l(e,n){var r,i,o,a,s;for(r in e)if(i=t.camelCase(r),o=n[i],a=e[r],t.isArray(a)&&(o=a[1],a=e[r]=a[0]),r!==i&&(e[i]=a,delete e[r]),s=t.cssHooks[i],s&&"expand"in s){a=s.expand(a),delete e[i];for(r in a)r in e||(e[r]=a[r],n[r]=o)}else n[i]=o}function f(e,n,r){var i,o,s=0,c=v.length,f=t.Deferred().always(function(){delete p.elem}),p=function(){if(o)return!1;for(var t=d||a(),n=Math.max(0,h.startTime+h.duration-t),r=n/h.duration||0,i=1-r,s=0,u=h.tweens.length;u>s;s++)h.tweens[s].run(i);return f.notifyWith(e,[h,i,n]),1>i&&u?n:(f.resolveWith(e,[h]),!1)},h=f.promise({elem:e,props:t.extend({},n),opts:t.extend(!0,{specialEasing:{}},r),originalProperties:n,originalOptions:r,startTime:d||a(),duration:r.duration,tweens:[],createTween:function(n,r){var i=t.Tween(e,h.opts,n,r,h.opts.specialEasing[n]||h.opts.easing);return h.tweens.push(i),i},stop:function(t){var n=0,r=t?h.tweens.length:0;if(o)return this;for(o=!0;r>n;n++)h.tweens[n].run(1);return t?f.resolveWith(e,[h,t]):f.rejectWith(e,[h,t]),this}}),m=h.props;for(l(m,h.opts.specialEasing);c>s;s++)if(i=v[s].call(h,e,m,h.opts))return i;return t.map(m,u,h),t.isFunction(h.opts.start)&&h.opts.start.call(e,h),t.fx.timer(t.extend(p,{elem:e,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}var d,p,h=/^(?:toggle|show|hide)$/,m=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),g=/queueHooks$/,v=[c],y={"*":[function(e,n){var r=this.createTween(e,n),i=r.cur(),o=m.exec(n),a=o&&o[3]||(t.cssNumber[e]?"":"px"),s=(t.cssNumber[e]||"px"!==a&&+i)&&m.exec(t.css(r.elem,e)),u=1,c=20;if(s&&s[3]!==a){a=a||s[3],o=o||[],s=+i||1;do u=u||".5",s/=u,t.style(r.elem,e,s+a);while(u!==(u=r.cur()/i)&&1!==u&&--c)}return o&&(s=r.start=+s||+i||0,r.unit=a,r.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),r}]};return t.Animation=t.extend(f,{tweener:function(e,n){t.isFunction(e)?(n=e,e=["*"]):e=e.split(" ");for(var r,i=0,o=e.length;o>i;i++)r=e[i],y[r]=y[r]||[],y[r].unshift(n)},prefilter:function(t,e){e?v.unshift(t):v.push(t)}}),t.speed=function(e,n,r){var i=e&&"object"==typeof e?t.extend({},e):{complete:r||!r&&n||t.isFunction(e)&&e,duration:e,easing:r&&n||n&&!t.isFunction(n)&&n};return i.duration=t.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in t.fx.speeds?t.fx.speeds[i.duration]:t.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){t.isFunction(i.old)&&i.old.call(this),i.queue&&t.dequeue(this,i.queue)},i},t.fn.extend({fadeTo:function(t,e,n,i){return this.filter(r).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(e,n,r,i){var a=t.isEmptyObject(e),s=t.speed(n,r,i),u=function(){var n=f(this,t.extend({},e),s);(a||o.get(this,"finish"))&&n.stop(!0)};return u.finish=u,a||s.queue===!1?this.each(u):this.queue(s.queue,u)},stop:function(e,n,r){var i=function(t){var e=t.stop;delete t.stop,e(r)};return"string"!=typeof e&&(r=n,n=e,e=void 0),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var n=!0,a=null!=e&&e+"queueHooks",s=t.timers,u=o.get(this);if(a)u[a]&&u[a].stop&&i(u[a]);else for(a in u)u[a]&&u[a].stop&&g.test(a)&&i(u[a]);for(a=s.length;a--;)s[a].elem!==this||null!=e&&s[a].queue!==e||(s[a].anim.stop(r),n=!1,s.splice(a,1));(n||!r)&&t.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var n,r=o.get(this),i=r[e+"queue"],a=r[e+"queueHooks"],s=t.timers,u=i?i.length:0;for(r.finish=!0,t.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),n=s.length;n--;)s[n].elem===this&&s[n].queue===e&&(s[n].anim.stop(!0),s.splice(n,1));for(n=0;u>n;n++)i[n]&&i[n].finish&&i[n].finish.call(this);delete r.finish})}}),t.each(["toggle","show","hide"],function(e,n){var r=t.fn[n];t.fn[n]=function(t,e,i){return null==t||"boolean"==typeof t?r.apply(this,arguments):this.animate(s(n,!0),t,e,i)}}),t.each({slideDown:s("show"),slideUp:s("hide"),slideToggle:s("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){t.fn[e]=function(t,e,r){return this.animate(n,t,e,r)}}),t.timers=[],t.fx.tick=function(){var e,n=0,r=t.timers;for(d=t.now();n<r.length;n++)e=r[n],e()||r[n]!==e||r.splice(n--,1);r.length||t.fx.stop(),d=void 0},t.fx.timer=function(e){t.timers.push(e),e()?t.fx.start():t.timers.pop()},t.fx.interval=13,t.fx.start=function(){p||(p=setInterval(t.fx.tick,t.fx.interval))},t.fx.stop=function(){clearInterval(p),p=null},t.fx.speeds={slow:600,fast:200,_default:400},t});